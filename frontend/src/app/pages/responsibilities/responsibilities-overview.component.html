<app-menu></app-menu>
<!-- src/app/pages/godfather-overview/godfather-overview.component.html -->
<mat-toolbar color="primary" class="mat-elevation-z2">
  <span>Godparents Overview</span>
  <span class="spacer"></span>
</mat-toolbar>

<div class="page">
  <!-- Search card -->
  <mat-card class="search-card mat-elevation-z3">
    <mat-card-header>
      <mat-card-title>Select a user</mat-card-title>
      <mat-card-subtitle>See which habits they oversee</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <mat-form-field appearance="outline" class="full">
        <mat-label>User</mat-label>
        <input
          type="text"
          matInput
          [formControl]="userCtrl"
          [matAutocomplete]="auto"
          placeholder="Search by name or email"
        />
        <mat-icon matSuffix>search</mat-icon>

        <mat-autocomplete #auto="matAutocomplete">
          <mat-option value="User 1">
            <mat-icon>person</mat-icon>
            <span>User 1</span>
          </mat-option>
          <mat-option value="User 2">
            <mat-icon>person</mat-icon>
            <span>User 2</span>
          </mat-option>
          <mat-option disabled>No matches</mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <!-- Loading bar (visual only) -->
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>

  <!-- Results card -->
  <mat-card class="results-card mat-elevation-z3">
    <mat-card-header>
      <mat-card-title>Habits (2)</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <table mat-table [dataSource]="[
        { title: 'Daily Run', owner: 'Alice', streak: 14, status: 'active', created: '2025-08-01', tags: ['health','outdoor'] },
        { title: 'Read Book', owner: 'Bob', streak: 7, status: 'paused', created: '2025-08-10', tags: ['learning'] }
      ]" class="mat-elevation-z2">

        <!-- Title -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef> Habit </th>
          <td mat-cell *matCellDef="let h"> {{ h.title }} </td>
        </ng-container>

        <!-- Owner -->
        <ng-container matColumnDef="owner">
          <th mat-header-cell *matHeaderCellDef> Owner </th>
          <td mat-cell *matCellDef="let h"> {{ h.owner }} </td>
        </ng-container>

        <!-- Streak -->
        <ng-container matColumnDef="streak">
          <th mat-header-cell *matHeaderCellDef> Streak </th>
          <td mat-cell *matCellDef="let h"> {{ h.streak }} </td>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let h">
            <mat-chip-set>
              <mat-chip color="primary" selected>{{ h.status }}</mat-chip>
            </mat-chip-set>
          </td>
        </ng-container>

        <!-- Created -->
        <ng-container matColumnDef="created">
          <th mat-header-cell *matHeaderCellDef> Created </th>
          <td mat-cell *matCellDef="let h"> {{ h.created }} </td>
        </ng-container>

        <!-- Tags -->
        <ng-container matColumnDef="tags">
          <th mat-header-cell *matHeaderCellDef> Tags </th>
          <td mat-cell *matCellDef="let h">
            <mat-chip-set>
              <mat-chip *ngFor="let t of h.tags">{{ t }}</mat-chip>
            </mat-chip-set>
          </td>
        </ng-container>

        <!-- Rows -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Empty state -->
  <mat-card class="empty-card mat-elevation-z1">
    <mat-card-content>
      <div class="empty">
        <mat-icon>self_improvement</mat-icon>
        <div>
          <div class="title">No habits found</div>
          <div class="subtitle">Select a user to see the habits they oversee.</div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<!-- End of Vibe -->
<mat-toolbar color="primary" class="mat-elevation-z2">
  <span>Godparents Overview</span>
  <span class="spacer"></span>
</mat-toolbar>

<mat-nav-list class="custom-list">
  <mat-list-item *ngFor="let habit of habits" class="custom-list-item">
    <div class="item-content">
      <mat-checkbox #checkbox (click)="onAchieved(habit.uuid, checkbox.checked)"></mat-checkbox>
      <span class="item-text">{{ habit.name }}</span>
    </div>
  </mat-list-item>
</mat-nav-list>